# Copyright (C) Intel Corporation
# SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
# See https://llvm.org/LICENSE.txt for license information.

# The rule specified in this file can be imported with commandline option:
# --rule-file={dpct_install_folder}/extensions/rule_templates/class_rule.yaml
---
- Rule: rule_classA
  Kind: Class
  Priority: Takeover
  In: ClassA                      # migrate type name classA to classB
  Out: ClassB
  Includes: []
  Fields:
    - In: fieldA                  # migrate class field reference to getter and setter
      OutGetter: get_b
      OutSetter: set_b
    - In: fieldC                  # migrate class field reference to another field
      Out: fieldD

# Following are the original CUDA source code and the migrated SYCL source code after applying the above rule.
# example.cu:
# ---------------------------------
# class ClassA{
# public:
#     int fieldA;
#     int fieldC;
# };
# class ClassB{
# public:
#     int fieldB;
# };

# void foo(){
#     ClassA a;
#     a.fieldC = 3;
#     a.fieldA = 3;
#     int k = a.fieldA;
# }
# ---------------------------------
#
# example.dp.cpp:
# Generated by: dpct example.cu --rule-file={dpct_install_folder}/extensions/rule_templates/class_rule.yaml
# ---------------------------------
# #include <sycl/sycl.hpp>
# #include <dpct/dpct.hpp>
# class ClassA {
# public:
#     int fieldA;
#     int fieldC;
# };
# class ClassB{
# public:
#     int fieldB;
# };

# void foo(){
#     ClassB a;
#     a.fieldD = 3;
#     a.set_b(3);
#     int k = a.get_b();
# }
# ---------------------------------

# Migration Rules section of IntelÂ® DPC++ Compatibility Tool Developer Guide and Reference in
# https://www.intel.com/content/www/us/en/developer/tools/oneapi/dpc-compatibility-tool-documentation.html