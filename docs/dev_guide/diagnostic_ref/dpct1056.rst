.. _DPCT1056:

DPCT1056
========

Message
-------

.. _msg-1056-start:

The use of *<variable name>* in device code was not detected. If this variable
is also used in device code, you need to rewrite the code.

.. _msg-1056-end:

Detailed Help
-------------

If ``__constant__`` variable is only used in host code, "__constant__" attribute
will be removed.

Suggestions to Fix
------------------

Command:

.. code-block:: bash
   :linenos:

   dpct --out-root out test.h --extra-arg=-xc

For example, this original CUDA\* code:

.. code-block:: cpp
   :linenos:

   #include <stdio.h>
   #include <cuda_runtime.h>
   
   static __constant__ const float aaa = 10.f;
   
   void foo_host() {
     printf("%f\n", aaa);
   }

results in the following migrated SYCL\* code:

.. code-block:: cpp
   :linenos:

   /*
   DPCT1056:0: The use of aaa in device code was not detected. If this variable is
   also used in device code, you need to rewrite the code.
   */
   static const float aaa = 10.f;
   
   void foo_host() {
     printf("%f\n", aaa);
   }

If the variable is only used in host code, ignore this warning,
the code is rewritten to:

.. code-block:: cpp
   :linenos:

   static const float aaa = 10.f;
   
   void foo_host() {
     printf("%f\n", aaa);
   }

If the variable is also used in device code,
(1) you need to migrate this code again with ``--extra-arg="-xcuda"`` passed to the tool to explicitly specify the code language; or
(2) Manually rewrite the code to:

.. code-block:: cpp
   :linenos:

   static const float aaa_host_ct1 = 10.f;
   static dpct::constant_memory<const float, 0> aaa(10.f);
   
   void foo_host() {
     printf("%f\n", aaa_host_ct1);
   }

