

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Frequently Asked Questions &#8212; SYCLomatic Documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'dev_guide/frequently-asked-questions-faq';</script>
    <link rel="shortcut icon" href="../_static/favicons.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="CUDA API Migration Support" href="api-mapping-status.html" />

<script type="text/javascript">
  // Configure TMS settings
  var wapLocalCode = 'us-en';
  var wapSection = 'SYCL-docs';
  // Load TMS
  (function () {
    var url = 'https://www.intel.com/content/dam/www/global/wap/tms-loader.js'; // WAP file URL
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true; po.src = url;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>


  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/oneAPI-rgb-rev-100.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/oneAPI-rgb-rev-100.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../get_started/index.html">Get Started with SYCLomatic</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Developer Guide and Reference</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="tool-setup.html">Tool Setup and Basic Use</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="migration.html">Migration</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="migration/migration-workflow.html">Migration Workflow Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration/generate-compilation-db.html">Generate a Compilation Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration/incremental-migration.html">Incremental Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration/migration-rules.html">Migration Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration/migrate-cmake-build.html">Migrate a CMake Build Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration/debug-with-codepin.html">Debug Migrated Code: Runtime Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration/API-Mapping-query-guide.html">Query CUDA* to SYCL* API Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration/analysis-mode.html">Analysis Mode</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="reference.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="reference/command-line-options-reference.html">Command Line Options Reference</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="reference/command-line-options-ref/migration-basic.html">Basic Migration Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/command-line-options-ref/migration-advance.html">Advanced Migration Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/command-line-options-ref/code-gen.html">Code Generation Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/command-line-options-ref/report-gen.html">Report Generation Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/command-line-options-ref/build-script-opt.html">Build Script Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/command-line-options-ref/help-info.html">Query API Mapping, Tool Warning, and Help Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/command-line-options-ref/intercept-build-options.html">intercept-build Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/command-line-options-ref/deprecated-options.html">Deprecated Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/command-line-options-ref/alpha-list.html">Alphabetical Option List</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="reference/diagnostics-reference.html">Diagnostics Reference</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1000.html">DPCT1000</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1001.html">DPCT1001</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1002.html">DPCT1002</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1003.html">DPCT1003</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1004.html">DPCT1004</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1005.html">DPCT1005</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1006.html">DPCT1006</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1007.html">DPCT1007</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1008.html">DPCT1008</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1009.html">DPCT1009</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1010.html">DPCT1010</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1011.html">DPCT1011</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1012.html">DPCT1012</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1013.html">DPCT1013</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1014.html">DPCT1014</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1015.html">DPCT1015</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1016.html">DPCT1016</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1017.html">DPCT1017</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1018.html">DPCT1018</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1019.html">DPCT1019</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1020.html">DPCT1020</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1021.html">DPCT1021</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1022.html">DPCT1022</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1023.html">DPCT1023</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1024.html">DPCT1024</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1025.html">DPCT1025</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1026.html">DPCT1026</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1027.html">DPCT1027</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1028.html">DPCT1028</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1029.html">DPCT1029</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1030.html">DPCT1030</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1031.html">DPCT1031</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1032.html">DPCT1032</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1033.html">DPCT1033</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1034.html">DPCT1034</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1035.html">DPCT1035</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1036.html">DPCT1036</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1037.html">DPCT1037</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1038.html">DPCT1038</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1039.html">DPCT1039</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1040.html">DPCT1040</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1041.html">DPCT1041</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1042.html">DPCT1042</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1043.html">DPCT1043</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1044.html">DPCT1044</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1045.html">DPCT1045</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1046.html">DPCT1046</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1047.html">DPCT1047</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1048.html">DPCT1048</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1049.html">DPCT1049</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1050.html">DPCT1050</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1051.html">DPCT1051</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1052.html">DPCT1052</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1053.html">DPCT1053</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1054.html">DPCT1054</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1055.html">DPCT1055</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1056.html">DPCT1056</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1057.html">DPCT1057</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1058.html">DPCT1058</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1059.html">DPCT1059</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1060.html">DPCT1060</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1061.html">DPCT1061</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1062.html">DPCT1062</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1063.html">DPCT1063</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1064.html">DPCT1064</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1065.html">DPCT1065</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1066.html">DPCT1066</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1067.html">DPCT1067</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1068.html">DPCT1068</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1069.html">DPCT1069</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1070.html">DPCT1070</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1071.html">DPCT1071</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1072.html">DPCT1072</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1073.html">DPCT1073</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1074.html">DPCT1074</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1075.html">DPCT1075</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1076.html">DPCT1076</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1077.html">DPCT1077</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1078.html">DPCT1078</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1079.html">DPCT1079</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1080.html">DPCT1080</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1081.html">DPCT1081</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1082.html">DPCT1082</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1083.html">DPCT1083</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1084.html">DPCT1084</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1085.html">DPCT1085</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1086.html">DPCT1086</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1087.html">DPCT1087</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1088.html">DPCT1088</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1089.html">DPCT1089</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1090.html">DPCT1090</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1091.html">DPCT1091</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1092.html">DPCT1092</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1093.html">DPCT1093</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1094.html">DPCT1094</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1095.html">DPCT1095</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1096.html">DPCT1096</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1097.html">DPCT1097</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1098.html">DPCT1098</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1099.html">DPCT1099</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1100.html">DPCT1100</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1101.html">DPCT1101</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1102.html">DPCT1102</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1103.html">DPCT1103</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1104.html">DPCT1104</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1105.html">DPCT1105</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1106.html">DPCT1106</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1107.html">DPCT1107</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1108.html">DPCT1108</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1109.html">DPCT1109</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1110.html">DPCT1110</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1111.html">DPCT1111</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1112.html">DPCT1112</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1113.html">DPCT1113</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1114.html">DPCT1114</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1115.html">DPCT1115</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1118.html">DPCT1118</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1119.html">DPCT1119</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1120.html">DPCT1120</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1121.html">DPCT1121</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1122.html">DPCT1122</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1123.html">DPCT1123</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1124.html">DPCT1124</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1125.html">DPCT1125</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1126.html">DPCT1126</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1127.html">DPCT1127</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1128.html">DPCT1128</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct1129.html">DPCT1129</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct2001.html">DPCT2001</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference/diagnostic_ref/dpct3000.html">DPCT3000</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference/dpct-namespace-reference.html">DPCT Namespace Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/compare-prog-models.html">CUDA* and SYCL* Programming Model Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/term-mapping-quick-ref.html">CUDA* to SYCL* Term Mapping Quick Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api-mapping-status.html">CUDA API Migration Support</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Frequently Asked Questions</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/oneapi-src/SYCLomatic/edit/SYCLomatic/docs/dev_guide/frequently-asked-questions-faq.rst" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/oneapi-src/SYCLomatic/issues/new?title=Issue%20on%20page%20%2Fdev_guide/frequently-asked-questions-faq.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/dev_guide/frequently-asked-questions-faq.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Frequently Asked Questions</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#general-information">General Information</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-migrate-source-files-that-use-c-11-or-newer-standard-features-on-linux-and-windows">How do I migrate source files that use C++11 or newer standard features on Linux* and Windows*?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-migrate-files-on-windows-when-using-a-cmake-project">How do I migrate files on Windows when using a CMake project?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-is-the-migrated-code-formatted">How is the migrated code formatted?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-does-the-compilation-database-not-contain-all-source-files-in-the-project">Why does the compilation database not contain all source files in the project?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-use-the-migrated-module-file-in-the-new-project">How do I use the migrated module file in the new project?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#is-the-memory-space-allocated-by-sycl-malloc-device-sycl-malloc-host-and-dpct-dpct-malloc-initialized">Is the memory space allocated by sycl::malloc_device, sycl::malloc_host, and dpct::dpct_malloc initialized?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-migrate-cuda-source-code-that-contains-cub-library-implementation-source-code">How do I migrate CUDA* source code that contains CUB library implementation source code?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-fix-the-issue-of-sycl-code-hanging-due-to-work-group-level-synchronization-such-as-a-group-barrier-used-in-a-conditional-statement">How do I fix the issue of SYCL* code hanging due to work group level synchronization, such as a group barrier used in a conditional statement?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#troubleshooting-migration">Troubleshooting Migration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-fix-an-error-such-as-error-unknown-type-name-when-i-migrate-files-with-dpct-in-root-srcdir-out-root-dstdir-cu">How do I fix an error such as “error: unknown type name” when I migrate files with “dpct –in-root=srcdir –out-root=dstdir *.cu”?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-fix-a-parsing-error-such-as-no-member-named-max-in-namespace-std-or-no-member-named-min-in-namespace-std-when-migrating-code-on-windows">How do I fix a parsing error such as “no member named ‘max’ in namespace ‘std’” or “no member named ‘min’ in namespace ‘std’” when migrating code on Windows?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-fix-a-compilation-error-such-as-error-dlopen-not-declared-when-i-compile-code-on-a-windows-machine-that-was-originally-migrated-on-linux">How do I fix a compilation error such as “error: dlopen not declared” when I compile code on a Windows machine, that was originally migrated on Linux?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-didn-t-the-atomic-apis-get-migrated">Why didn’t the “atomic*” APIs get migrated?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-did-my-migration-fail-with-error-restrict-requires-a-pointer-or-reference">Why did my migration fail with “error: restrict requires a pointer or reference”?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-resolve-incorrect-runtime-behavior-for-dpct-dev-mgr-and-dpct-mem-mgr-in-a-library-project-that-is-loaded-more-than-once-in-another-application">How do I resolve incorrect runtime behavior for dpct::dev_mgr and dpct:mem_mgr in a library project that is loaded more than once in another application?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-i-get-warning-shift-count-width-of-type-when-i-compile-migrated-code-with-the-intel-oneapi-dpc-c-compiler">Why do I get “warning: shift count &gt;= width of type” when I compile migrated code with the Intel® oneAPI DPC++/C++ Compiler?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-resolve-missing-include-errors-that-occur-when-migrating-my-code">How do I resolve missing include errors that occur when migrating my code?</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">#</a></h1>
<p><strong>General Information</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#how-do-i-migrate-source-files-that-use-c-11-or-newer-standard-features-on-linux-and-windows">How do I migrate source files that use C++11 or newer standard features on Linux* and Windows*?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-migrate-files-on-windows-when-using-a-cmake-project">How do I migrate files on Windows when using a CMake project?</a></p></li>
<li><p><a class="reference internal" href="#how-is-the-migrated-code-formatted">How is the migrated code formatted?</a></p></li>
<li><p><a class="reference internal" href="#why-does-the-compilation-database-not-contain-all-source-files-in-the-project">Why does the compilation database not contain all source files in the project?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-use-the-migrated-module-file-in-the-new-project">How do I use the migrated module file in the new project?</a></p></li>
<li><p><a class="reference internal" href="#is-the-memory-space-allocated-by-sycl-malloc-device-sycl-malloc-host-and-dpct-dpct-malloc-initialized">Is the memory space allocated by sycl::malloc_device, sycl::malloc_host, and dpct::dpct_malloc initialized?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-migrate-cuda-source-code-that-contains-cub-library-implementation-source-code">How do I migrate CUDA* source code that contains CUB library implementation source code?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-fix-the-issue-of-sycl-code-hanging-due-to-work-group-level-synchronization-such-as-a-group-barrier-used-in-a-conditional-statement">How do I fix the issue of SYCL* code hanging due to work group level synchronization, such as a group barrier used in a conditional statement?</a></p></li>
</ul>
<p><strong>Troubleshooting Migration</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#how-do-i-fix-an-error-such-as-error-unknown-type-name-when-i-migrate-files-with-dpct-in-root-srcdir-out-root-dstdir-cu">How do I fix an error such as “error: unknown type name” when I migrate files with “dpct –in-root=srcdir –out-root=dstdir *.cu”?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-fix-a-parsing-error-such-as-no-member-named-max-in-namespace-std-or-no-member-named-min-in-namespace-std-when-migrating-code-on-windows">How do I fix a parsing error such as “no member named ‘max’ in namespace ‘std’” or “no member named ‘min’ in namespace ‘std’” when migrating code on Windows?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-fix-a-compilation-error-such-as-error-dlopen-not-declared-when-i-compile-code-on-a-windows-machine-that-was-originally-migrated-on-linux">How do I fix a compilation error such as “error: dlopen not declared” when I compile code on a Windows machine, that was originally migrated on Linux?</a></p></li>
<li><p><a class="reference internal" href="#why-didn-t-the-atomic-apis-get-migrated">Why didn’t the “atomic*” APIs get migrated?</a></p></li>
<li><p><a class="reference internal" href="#why-did-my-migration-fail-with-error-restrict-requires-a-pointer-or-reference">Why did my migration fail with “error: restrict requires a pointer or reference”?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-resolve-incorrect-runtime-behavior-for-dpct-dev-mgr-and-dpct-mem-mgr-in-a-library-project-that-is-loaded-more-than-once-in-another-application">How do I resolve incorrect runtime behavior for dpct::dev_mgr and dpct:mem_mgr in a library project that is loaded more than once in another application?</a></p></li>
<li><p><a class="reference internal" href="#why-do-i-get-warning-shift-count-width-of-type-when-i-compile-migrated-code-with-the-intel-oneapi-dpc-c-compiler">Why do I get “warning: shift count &gt;= width of type” when I compile migrated code with the Intel® oneAPI DPC++/C++ Compiler?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-resolve-missing-include-errors-that-occur-when-migrating-my-code">How do I resolve missing include errors that occur when migrating my code?</a></p></li>
</ul>
<section id="general-information">
<h2>General Information<a class="headerlink" href="#general-information" title="Permalink to this headline">#</a></h2>
<section id="how-do-i-migrate-source-files-that-use-c-11-or-newer-standard-features-on-linux-and-windows">
<h3>How do I migrate source files that use C++11 or newer standard features on Linux* and Windows*?<a class="headerlink" href="#how-do-i-migrate-source-files-that-use-c-11-or-newer-standard-features-on-linux-and-windows" title="Permalink to this headline">#</a></h3>
<p>On Linux, the default C++ standard for SYCLomatic’s
parser is C++98, with some C++11 features
accepted. If you want to enable other C++11 or newer standard
features in SYCLomatic, you need to add
the <code class="docutils literal notranslate"><span class="pre">--extra-arg=&quot;-std=&lt;value&gt;&quot;</span></code> option to the
command line. The supported values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c++11</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">c++14</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">c++17</span></code></p></li>
</ul>
<p>On Windows, the default C++ standard for SYCLomatic’s
parser is C++14. If you want to enable C++17
features in SYCLomatic, you need to add
the option <code class="docutils literal notranslate"><span class="pre">--extra-arg=&quot;-std=c++17&quot;</span></code> to the command line.</p>
</section>
<section id="how-do-i-migrate-files-on-windows-when-using-a-cmake-project">
<h3>How do I migrate files on Windows when using a CMake project?<a class="headerlink" href="#how-do-i-migrate-files-on-windows-when-using-a-cmake-project" title="Permalink to this headline">#</a></h3>
<p>For a CMake project on a Windows OS, you can use CMake to generate
Microsoft Visual Studio* project files (<code class="docutils literal notranslate"><span class="pre">vcxproj</span></code> files). Then choose one of
the following options:</p>
<ul class="simple">
<li><p>Migrate the source files on the command line by using the
<code class="docutils literal notranslate"><span class="pre">--vcxprojfile</span></code> option of SYCLomatic.</p></li>
<li><p>Migrate the entire project in Microsoft Visual Studio
with an SYCLomatic Microsoft Visual Studio plugin.</p></li>
</ul>
</section>
<section id="how-is-the-migrated-code-formatted">
<h3>How is the migrated code formatted?<a class="headerlink" href="#how-is-the-migrated-code-formatted" title="Permalink to this headline">#</a></h3>
<p>SYCLomatic provides two options to control the format of
migrated code: <code class="docutils literal notranslate"><span class="pre">--format-range</span></code> and <code class="docutils literal notranslate"><span class="pre">--format-style</span></code> .</p>
<p>If input source code is well formatted, SYCLomatic
will use default options settings
<code class="docutils literal notranslate"><span class="pre">--format-range</span></code> and <code class="docutils literal notranslate"><span class="pre">--format-style</span></code> to format the resulting
code.</p>
<p>If input source code is not well formatted (for example, the tool
detects mixed use of tabs and spaces or mixed indents) you can do
one of the following:</p>
<ul class="simple">
<li><p>SYCLomatic will try to detect the
indent size of the original code and apply it to the resulting
code. You can guide the tool by setting <code class="docutils literal notranslate"><span class="pre">TabWidth</span></code> and
<code class="docutils literal notranslate"><span class="pre">UseTab</span></code> in the <code class="docutils literal notranslate"><span class="pre">.clang-format</span></code> file. Because the input source
code is not well formatted, the indents in the resulting code
may still be inconsistent.</p></li>
<li><p>Run SYCLomatic with the
<code class="docutils literal notranslate"><span class="pre">--format-range=all</span></code> option to format the entire resulting
file. The change between input source code and resulting source
code may be large and make it more difficult to compare the
code.</p></li>
<li><p>Format your input source code, then use SYCLomatic
with the same <code class="docutils literal notranslate"><span class="pre">.clang-format</span></code> file for migration.</p></li>
</ul>
</section>
<section id="why-does-the-compilation-database-not-contain-all-source-files-in-the-project">
<h3>Why does the compilation database not contain all source files in the project?<a class="headerlink" href="#why-does-the-compilation-database-not-contain-all-source-files-in-the-project" title="Permalink to this headline">#</a></h3>
<p>In the project build folder, the command <code class="docutils literal notranslate"><span class="pre">intercept-build</span> <span class="pre">make</span> <span class="pre">[target]</span></code> is
used to generate the compilation database. The content of the compilation
database depends on the optional [target] parameter. If you need to get the
list of files corresponding to default build target, do not specify the [target]
parameter.</p>
<p>Make sure to disable ccache (compiler cache) in your project before using intercept-build.
If ccache is enabled, intercept-build cannot generate the complete compilation database as
some compile commands may be skipped if the target objects are already available in the cache.
Use the following command to disable ccache before running the intercept-build command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">CCACHE_DISABLE</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
</section>
<section id="how-do-i-use-the-migrated-module-file-in-the-new-project">
<h3>How do I use the migrated module file in the new project?<a class="headerlink" href="#how-do-i-use-the-migrated-module-file-in-the-new-project" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">.cu</span></code> module files are compiled with the <code class="docutils literal notranslate"><span class="pre">-ptx</span></code> or <code class="docutils literal notranslate"><span class="pre">-cubin</span></code> options in the
original project and dynamically loaded into other <code class="docutils literal notranslate"><span class="pre">*.cu</span></code> files with
<code class="docutils literal notranslate"><span class="pre">cuModuleLoad()</span></code> or <code class="docutils literal notranslate"><span class="pre">cuModuleLoadData()</span></code>.</p>
<p>SYCLomatic migrates module file code in the same way as other
<code class="docutils literal notranslate"><span class="pre">*.cu</span></code> files. In addition, it adds a wrapper function for each function in the
module file that has the <code class="docutils literal notranslate"><span class="pre">_global_</span></code> attribute.</p>
<p>You can compile the migrated module file into a dynamic library and load the
library with a dynamic library API appropriate to your platform. For example:</p>
<ul class="simple">
<li><p>In Linux, load a dynamic library (<code class="docutils literal notranslate"><span class="pre">.so</span></code>) using <code class="docutils literal notranslate"><span class="pre">dlopen()</span></code></p></li>
<li><p>In Windows, load a dynamic library (<code class="docutils literal notranslate"><span class="pre">.dll</span></code>) using <code class="docutils literal notranslate"><span class="pre">LoadLibraryA()</span></code></p></li>
</ul>
</section>
<section id="is-the-memory-space-allocated-by-sycl-malloc-device-sycl-malloc-host-and-dpct-dpct-malloc-initialized">
<h3>Is the memory space allocated by sycl::malloc_device, sycl::malloc_host, and dpct::dpct_malloc initialized?<a class="headerlink" href="#is-the-memory-space-allocated-by-sycl-malloc-device-sycl-malloc-host-and-dpct-dpct-malloc-initialized" title="Permalink to this headline">#</a></h3>
<p>The memory allocated by <code class="docutils literal notranslate"><span class="pre">sycl::malloc_device</span></code>, <code class="docutils literal notranslate"><span class="pre">sycl::malloc_host</span></code>, and
<code class="docutils literal notranslate"><span class="pre">dpct::dpct_malloc</span></code> is not initialized. If your program explicitly or
implicitly relies on the initial value of newly allocated memory, the program
may fail at runtime. Adjust your code to avoid such failures.</p>
<p>For example, the following original code:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1">// original code</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">device_mem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="n">device_mem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sycl</span><span class="o">::</span><span class="n">malloc_device</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">dpct</span><span class="o">::</span><span class="n">get_default_queue</span><span class="p">());</span><span class="w"></span>
<span class="linenos">4</span><span class="n">device_mem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">somevalue</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>is adjusted to initialize the newly allocated memory to 0 before use:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1">// fixed SYCL code</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">device_mem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="n">device_mem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sycl</span><span class="o">::</span><span class="n">malloc_device</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">dpct</span><span class="o">::</span><span class="n">get_default_queue</span><span class="p">());</span><span class="w"></span>
<span class="linenos">4</span><span class="n">dpct</span><span class="o">::</span><span class="n">get_default_queue</span><span class="p">().</span><span class="n">memset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">).</span><span class="n">wait</span><span class="p">();</span><span class="w"></span>
<span class="linenos">5</span><span class="n">device_mem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">somevalue</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="how-do-i-migrate-cuda-source-code-that-contains-cub-library-implementation-source-code">
<h3>How do I migrate CUDA* source code that contains CUB library implementation source code?<a class="headerlink" href="#how-do-i-migrate-cuda-source-code-that-contains-cub-library-implementation-source-code" title="Permalink to this headline">#</a></h3>
<p>If you migrate the CUB library implementation code directly, you may not get the
expected results. Instead, exclude CUB library implementation source code from
your migration by adding <code class="docutils literal notranslate"><span class="pre">--in-root-exclude=&lt;path</span> <span class="pre">to</span> <span class="pre">CUB</span> <span class="pre">library</span> <span class="pre">source</span> <span class="pre">code&gt;</span></code>
to your migration command.</p>
</section>
<section id="how-do-i-fix-the-issue-of-sycl-code-hanging-due-to-work-group-level-synchronization-such-as-a-group-barrier-used-in-a-conditional-statement">
<span id="faq-hang-wg-synch"></span><h3>How do I fix the issue of SYCL* code hanging due to work group level synchronization, such as a group barrier used in a conditional statement?<a class="headerlink" href="#how-do-i-fix-the-issue-of-sycl-code-hanging-due-to-work-group-level-synchronization-such-as-a-group-barrier-used-in-a-conditional-statement" title="Permalink to this headline">#</a></h3>
<p>If synchronization API in control flow statements like a conditional statement and
loop statement are called in SYCL code, you may encounter a runtime hang issue.
The basic idea to fix the hang issue is to ensure that each synchronization API is
either reached by all work items of a workgroup, or skipped by all the work items of
a workgroup.</p>
<p>Here are two examples of how to fix:</p>
<p>In the first example, the synchronization API group barrier(nd_item.barrier()) is called
inside an if block. The evaluation results of the conditional statement differ in
each work item so not all work items can reach the synchronization API.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// original code</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kt">void</span><span class="w"> </span><span class="nf">kernel</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">sycl</span><span class="o">::</span><span class="n">nd_item</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">item_ct1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">   </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">tid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_local_id</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tid</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">      </span><span class="c1">// CODE block 1</span>
<span class="linenos"> 7</span><span class="w">      </span><span class="p">...</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">      </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">barrier</span><span class="p">(</span><span class="n">sycl</span><span class="o">::</span><span class="n">access</span><span class="o">::</span><span class="n">fence_space</span><span class="o">::</span><span class="n">local_space</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">      </span><span class="c1">// CODE block 2</span>
<span class="linenos">10</span><span class="w">      </span><span class="p">...</span><span class="w"></span>
<span class="linenos">11</span><span class="w">   </span><span class="p">}</span><span class="w"></span>
<span class="linenos">12</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The following code shows how to fix the hang issue by moving the synchronization
statement out of the if block.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// fixed SYCL code</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kt">void</span><span class="w"> </span><span class="nf">kernel</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">sycl</span><span class="o">::</span><span class="n">nd_item</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">item_ct1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">   </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">tid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_local_id</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tid</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">      </span><span class="c1">// CODE block 1</span>
<span class="linenos"> 7</span><span class="w">      </span><span class="p">...</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">   </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">   </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">barrier</span><span class="p">(</span><span class="n">sycl</span><span class="o">::</span><span class="n">access</span><span class="o">::</span><span class="n">fence_space</span><span class="o">::</span><span class="n">local_space</span><span class="p">);</span><span class="w"></span>
<span class="linenos">10</span><span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tid</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">11</span><span class="w">      </span><span class="c1">// CODE block 2</span>
<span class="linenos">12</span><span class="w">      </span><span class="p">...</span><span class="w"></span>
<span class="linenos">13</span><span class="w">   </span><span class="p">}</span><span class="w"></span>
<span class="linenos">14</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The second example demonstrates how to fix the hang issue when a synchronization
API is used in a for loop:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// original code</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kt">void</span><span class="w"> </span><span class="nf">compute</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id_space</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">sycl</span><span class="o">::</span><span class="n">nd_item</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">item_ct1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">   </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_local_range</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_local_id</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">   </span><span class="k">for</span><span class="w"> </span><span class="p">(;</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">id_space</span><span class="p">;</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_group_range</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_local_range</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">      </span><span class="p">...</span><span class="w"></span>
<span class="linenos"> 7</span><span class="w">      </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">barrier</span><span class="p">();</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">      </span><span class="p">...</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">   </span><span class="p">}</span><span class="w"></span>
<span class="linenos">10</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The following code shows how to fix the hang issue by making sure all work items
have same run footprint in the for loop.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// fixed SYCL code</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kt">void</span><span class="w"> </span><span class="nf">compute</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id_space</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">sycl</span><span class="o">::</span><span class="n">nd_item</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">item_ct1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">   </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_local_range</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_local_id</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">   </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">num_workitem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_group_range</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_local_range</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">   </span><span class="c1">// The condition is updated to make sure all work items can enter the loop body in each iteration</span>
<span class="linenos"> 7</span><span class="w">   </span><span class="k">for</span><span class="w"> </span><span class="p">(;</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">((</span><span class="n">id_space</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num_workitem</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">num_workitem</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">num_workitem</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">   </span><span class="n">id</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_group_range</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">get_local_range</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">      </span><span class="p">...</span><span class="w"></span>
<span class="linenos">10</span><span class="w">      </span><span class="n">item_ct1</span><span class="p">.</span><span class="n">barrier</span><span class="p">();</span><span class="w"></span>
<span class="linenos">11</span><span class="w">      </span><span class="p">...</span><span class="w"></span>
<span class="linenos">12</span><span class="w">   </span><span class="p">}</span><span class="w"></span>
<span class="linenos">13</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="troubleshooting-migration">
<h2>Troubleshooting Migration<a class="headerlink" href="#troubleshooting-migration" title="Permalink to this headline">#</a></h2>
<section id="how-do-i-fix-an-error-such-as-error-unknown-type-name-when-i-migrate-files-with-dpct-in-root-srcdir-out-root-dstdir-cu">
<h3>How do I fix an error such as “error: unknown type name” when I migrate files with “dpct –in-root=srcdir –out-root=dstdir *.cu”?<a class="headerlink" href="#how-do-i-fix-an-error-such-as-error-unknown-type-name-when-i-migrate-files-with-dpct-in-root-srcdir-out-root-dstdir-cu" title="Permalink to this headline">#</a></h3>
<p>The problem may be caused by files in the <code class="docutils literal notranslate"><span class="pre">*.cu</span></code> list, which can
be used as header files (included with an <code class="docutils literal notranslate"><span class="pre">#include</span></code> statement)
and are not supposed to be parsed as a standalone file. In this
case, SYCLomatic reports an error if it
cannot parse the file because the file depends on the
definitions/declarations in other files. Use one of the methods
below to migrate your content:</p>
<ul class="simple">
<li><p>Rely on SYCLomatic to decide which
files to migrate with:
<code class="docutils literal notranslate"><span class="pre">compile_commands.json:</span> <span class="pre">&quot;dpct</span> <span class="pre">-p=compile_commands.json</span> <span class="pre">--in-root=srcdir</span> <span class="pre">--out-root=dstdir&quot;</span></code></p></li>
<li><p>Manually pass specific files to migrate, but do not pass the
files that are included in other files and not supposed to be
compiled as a standalone file in the original application. The
header files are migrated automatically when they are included
by the files provided as the input to the tool and are located
within the <code class="docutils literal notranslate"><span class="pre">in-root</span></code> folder:
<code class="docutils literal notranslate"><span class="pre">dpct</span> <span class="pre">--in-root=</span> <span class="pre">srcdir</span> <span class="pre">--out-root=dstdir</span> <span class="pre">sample.cu</span></code></p></li>
</ul>
</section>
<section id="how-do-i-fix-a-parsing-error-such-as-no-member-named-max-in-namespace-std-or-no-member-named-min-in-namespace-std-when-migrating-code-on-windows">
<h3>How do I fix a parsing error such as “no member named ‘max’ in namespace ‘std’” or “no member named ‘min’ in namespace ‘std’” when migrating code on Windows?<a class="headerlink" href="#how-do-i-fix-a-parsing-error-such-as-no-member-named-max-in-namespace-std-or-no-member-named-min-in-namespace-std-when-migrating-code-on-windows" title="Permalink to this headline">#</a></h3>
<p>Use one of the following methods to resolve the error:</p>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;algorithm&gt;</span></code> to the source file before using <code class="docutils literal notranslate"><span class="pre">std::min</span></code> and
<code class="docutils literal notranslate"><span class="pre">std::max</span></code></p></li>
<li><p>Define the NOMINMAX macro by inserting <code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">NOMINMAX</span></code> before including
<code class="docutils literal notranslate"><span class="pre">WinDef.h</span></code></p></li>
</ul>
</section>
<section id="how-do-i-fix-a-compilation-error-such-as-error-dlopen-not-declared-when-i-compile-code-on-a-windows-machine-that-was-originally-migrated-on-linux">
<h3>How do I fix a compilation error such as “error: dlopen not declared” when I compile code on a Windows machine, that was originally migrated on Linux?<a class="headerlink" href="#how-do-i-fix-a-compilation-error-such-as-error-dlopen-not-declared-when-i-compile-code-on-a-windows-machine-that-was-originally-migrated-on-linux" title="Permalink to this headline">#</a></h3>
<p>When SYCLomatic generates the source code, it uses dynamic loading
APIs specific to the OS on which SYCLomatic is running.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">dlopen</span></code>, <code class="docutils literal notranslate"><span class="pre">dlclose</span></code>, and <code class="docutils literal notranslate"><span class="pre">dlsym</span></code> are used on Linux and
<code class="docutils literal notranslate"><span class="pre">LoadLibraryA</span></code>, <code class="docutils literal notranslate"><span class="pre">FreeLibrary</span></code>, and <code class="docutils literal notranslate"><span class="pre">GetProcAddress</span></code> are used on Windows.</p>
<p>If your code was migrated on a OS that is different from the OS you
need to compile the generated code on, migrate the project again with the
SYCLomatic on the target OS or fix the code manually.</p>
</section>
<section id="why-didn-t-the-atomic-apis-get-migrated">
<h3>Why didn’t the “atomic*” APIs get migrated?<a class="headerlink" href="#why-didn-t-the-atomic-apis-get-migrated" title="Permalink to this headline">#</a></h3>
<p>SYCLomatic may assume that the “atomic*” APIs are user-defined
APIs, in which case they are not migrated.</p>
<p>This can occur in the following scenarios:</p>
<ul class="simple">
<li><p>The CUDA include path is specified by both <code class="docutils literal notranslate"><span class="pre">--cuda-include-path</span></code> and <code class="docutils literal notranslate"><span class="pre">-I*</span></code>,
but the paths are different</p></li>
<li><p>The CUDA include path is specified by <code class="docutils literal notranslate"><span class="pre">-I*</span></code>, but there are other CUDA include
files located on the default CUDA install path</p></li>
</ul>
<p>To make sure “atomic*” APIs are migrated, don’t use <code class="docutils literal notranslate"><span class="pre">-I*</span></code> to specify the CUDA
include path with the <code class="docutils literal notranslate"><span class="pre">dpct</span></code> migration command. Instead, use only
<code class="docutils literal notranslate"><span class="pre">--cuda-include-path</span></code> to specify the CUDA include path.</p>
</section>
<section id="why-did-my-migration-fail-with-error-restrict-requires-a-pointer-or-reference">
<h3>Why did my migration fail with “error: restrict requires a pointer or reference”?<a class="headerlink" href="#why-did-my-migration-fail-with-error-restrict-requires-a-pointer-or-reference" title="Permalink to this headline">#</a></h3>
<p>The C++ standard does not support the restrict qualifier and the C standard
supports the restrict qualifier only on pointers to an object type.</p>
<p>Based on these language standards SYCLomatic emits the parsing error.</p>
<p>You may need to adjust the source code.</p>
</section>
<section id="how-do-i-resolve-incorrect-runtime-behavior-for-dpct-dev-mgr-and-dpct-mem-mgr-in-a-library-project-that-is-loaded-more-than-once-in-another-application">
<h3>How do I resolve incorrect runtime behavior for dpct::dev_mgr and dpct:mem_mgr in a library project that is loaded more than once in another application?<a class="headerlink" href="#how-do-i-resolve-incorrect-runtime-behavior-for-dpct-dev-mgr-and-dpct-mem-mgr-in-a-library-project-that-is-loaded-more-than-once-in-another-application" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">dpct::dev_mgr</span></code> and <code class="docutils literal notranslate"><span class="pre">dpct::mem_mgr</span></code> are singleton classes in the
SYCLomatic helper functions. When the helper function headers are used
to build an executable project, both <code class="docutils literal notranslate"><span class="pre">dpct::dev_mgr</span></code> and <code class="docutils literal notranslate"><span class="pre">dpct::mem_mgr</span></code>
will have only one instance in the executable. However, when the helper function
headers are used to build a library project and the library project is loaded
more than once with <code class="docutils literal notranslate"><span class="pre">dlopen()</span></code> (or <code class="docutils literal notranslate"><span class="pre">LoadLibraryA()</span></code> for Windows) in an
application, more than two instances of <code class="docutils literal notranslate"><span class="pre">dpct::dev_mgr</span></code> and <code class="docutils literal notranslate"><span class="pre">dpct::mem_mgr</span></code>
will be created and result in incorrect runtime behavior.</p>
<p>For example, both files <code class="docutils literal notranslate"><span class="pre">libA.cpp</span></code> and <code class="docutils literal notranslate"><span class="pre">libB.cpp</span></code> include SYCLomatic
helper function header <code class="docutils literal notranslate"><span class="pre">dpct.hpp</span></code>, and they are built into dynamic libraries
<code class="docutils literal notranslate"><span class="pre">libA.so</span></code> and <code class="docutils literal notranslate"><span class="pre">libB.so</span></code> respectively. If an application <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code> imports
the libraries with <code class="docutils literal notranslate"><span class="pre">dlopen()</span></code>, there will be two instances of <code class="docutils literal notranslate"><span class="pre">dpct::dev_mgr</span></code>
and <code class="docutils literal notranslate"><span class="pre">dpct::mem_mgr</span></code> in the runtime of the application.</p>
<p>To resolve this issue, separate the implementation and the declaration of
<code class="docutils literal notranslate"><span class="pre">dpct::dev_mgr</span></code> and <code class="docutils literal notranslate"><span class="pre">dpct::mem_mgr</span></code> in SYCLomatic helper function:</p>
<ol class="arabic">
<li><p>Create a new C++ file <code class="docutils literal notranslate"><span class="pre">dpct_helper.cpp</span></code>.</p></li>
<li><p>Move the implementation of <code class="docutils literal notranslate"><span class="pre">instance()</span></code> in <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">dev_mgr</span></code> from
<code class="docutils literal notranslate"><span class="pre">dpct/device.hpp</span></code> to <code class="docutils literal notranslate"><span class="pre">dpct_helper.cpp</span></code>.</p>
<p>For example, the original <code class="docutils literal notranslate"><span class="pre">dpct/device.hpp</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">dev_mgr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">2</span><span class="w"> </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="linenos">3</span><span class="w">   </span><span class="k">static</span><span class="w"> </span><span class="n">dev_mgr</span><span class="w"> </span><span class="o">&amp;</span><span class="n">instance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// the implementation and the declaration of dev_mgr::instance</span>
<span class="linenos">4</span><span class="w">     </span><span class="k">static</span><span class="w"> </span><span class="n">dev_mgr</span><span class="w"> </span><span class="n">d_m</span><span class="p">;</span><span class="w"></span>
<span class="linenos">5</span><span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="n">d_m</span><span class="p">;</span><span class="w"></span>
<span class="linenos">6</span><span class="w">   </span><span class="p">}</span><span class="w"></span>
<span class="linenos">7</span><span class="w">   </span><span class="p">...</span><span class="w"></span>
<span class="linenos">8</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>is updated to:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">dev_mgr</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">2</span><span class="w"> </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="linenos">3</span><span class="w">   </span><span class="k">static</span><span class="w"> </span><span class="n">dev_mgr</span><span class="w"> </span><span class="o">&amp;</span><span class="n">instance</span><span class="p">();</span><span class="c1">//the declaration of dev_mgr::instance</span>
<span class="linenos">4</span><span class="w">   </span><span class="p">...</span><span class="w"></span>
<span class="linenos">5</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>and the new <code class="docutils literal notranslate"><span class="pre">dpct_helper.cpp</span></code> now contains the implementation of
<code class="docutils literal notranslate"><span class="pre">dev_mgr::instance()</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;dpct/device.hpp&gt;</span><span class="cp"></span>
<span class="linenos">2</span><span class="n">dpct</span><span class="o">::</span><span class="n">dev_mgr</span><span class="w"> </span><span class="o">&amp;</span><span class="nf">dev_mgr::instance</span><span class="p">(){</span><span class="w"> </span><span class="c1">// the implementation of dev_mgr::instance</span>
<span class="linenos">3</span><span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="n">dev_mgr</span><span class="w"> </span><span class="n">d_m</span><span class="p">;</span><span class="w"></span>
<span class="linenos">4</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">d_m</span><span class="p">;</span><span class="w"></span>
<span class="linenos">5</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>Similar to step two, move the implementation of <code class="docutils literal notranslate"><span class="pre">instance()</span></code> in the
<code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">mem_mgr</span></code> from <code class="docutils literal notranslate"><span class="pre">dpct/memory.hpp</span></code> to <code class="docutils literal notranslate"><span class="pre">dpct_helper.cpp</span></code>.</p></li>
<li><p>Build <code class="docutils literal notranslate"><span class="pre">dpct_helper.cpp</span></code> into a dynamic library <code class="docutils literal notranslate"><span class="pre">libdpct_helper</span></code>.</p>
<ul>
<li><p>In Linux:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dpcpp -g -shared -o libdpct_helper.so -fPIC ./dpct_helper.cpp
</pre></div>
</div>
</li>
<li><p>In Windows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cl.exe /LD dpct_helper.cpp
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Add library <code class="docutils literal notranslate"><span class="pre">libdpct_helper</span></code> to the environment variables.</p>
<ul class="simple">
<li><p>In Linux: Add the location of <code class="docutils literal notranslate"><span class="pre">libdpct_helper.so</span></code> into <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>.</p></li>
<li><p>In Windows: Add the location of <code class="docutils literal notranslate"><span class="pre">libdpct_helper.dll</span></code> into <code class="docutils literal notranslate"><span class="pre">PATH</span></code>.</p></li>
</ul>
</li>
<li><p>Dynamically link <code class="docutils literal notranslate"><span class="pre">libdpct_helper</span></code> when building libraries and applications.</p></li>
</ol>
<p>After performing the update steps, all the libraries and applications will share
the same instance of the device manager <code class="docutils literal notranslate"><span class="pre">dpct::dev_mgr</span></code> and the memory manager
<code class="docutils literal notranslate"><span class="pre">dpct::mem_mgr</span></code> in SYCLomatic helper functions.</p>
</section>
<section id="why-do-i-get-warning-shift-count-width-of-type-when-i-compile-migrated-code-with-the-intel-oneapi-dpc-c-compiler">
<h3>Why do I get “warning: shift count &gt;= width of type” when I compile migrated code with the Intel® oneAPI DPC++/C++ Compiler?<a class="headerlink" href="#why-do-i-get-warning-shift-count-width-of-type-when-i-compile-migrated-code-with-the-intel-oneapi-dpc-c-compiler" title="Permalink to this headline">#</a></h3>
<p>Shifting bits where the shift is greater than the type length is undefined
behavior for the <a class="reference external" href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/dpc-compiler.html">Intel® oneAPI DPC++/C++ Compiler</a> and may result in different behavior on
different devices. Adjust your code to avoid this type of shift.</p>
<p>For example, the migrated SYCL* code:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1">// migrated SYCL code</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">4</span><span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="linenos">5</span><span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">bit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">index</span><span class="p">[</span><span class="n">tid</span><span class="p">]</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">32</span><span class="p">;</span><span class="w"></span>
<span class="linenos">6</span><span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="n">tid</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">bit</span><span class="p">;</span><span class="w"></span>
<span class="linenos">7</span><span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="linenos">8</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>is adjusted to avoid a bit shift that is greater than the type length:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">// fixed SYCL code</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">bit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">index</span><span class="p">[</span><span class="n">tid</span><span class="p">]</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">32</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 7</span><span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="mi">32</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">bit</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">    </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">  </span><span class="k">else</span><span class="w"></span>
<span class="linenos">10</span><span class="w">    </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="n">tid</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">bit</span><span class="p">;</span><span class="w"></span>
<span class="linenos">11</span><span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="linenos">12</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="how-do-i-resolve-missing-include-errors-that-occur-when-migrating-my-code">
<h3>How do I resolve missing include errors that occur when migrating my code?<a class="headerlink" href="#how-do-i-resolve-missing-include-errors-that-occur-when-migrating-my-code" title="Permalink to this headline">#</a></h3>
<p>Use the option <code class="docutils literal notranslate"><span class="pre">--extra-arg=-v</span></code> to prompt SYCLomatic to use verbose
output, which includes information about which paths the tool searches
for includes.</p>
<p>You can provide an additional path to look for includes in one of the following
ways:</p>
<ul class="simple">
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">--extra-arg=&quot;-I&lt;extra</span> <span class="pre">include</span> <span class="pre">path&gt;&quot;</span></code> option in your migration command
to specify an additional path for the tool to use when searching for includes
during migration.</p></li>
<li><p>If you are using a compilation database, add the <code class="docutils literal notranslate"><span class="pre">-I&lt;extra</span> <span class="pre">include</span> <span class="pre">path&gt;</span></code>
option to the compile command in the database for the source files, to
specify the include path.</p></li>
</ul>
</section>
</section>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="api-mapping-status.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">CUDA API Migration Support</p>
      </div>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#general-information">General Information</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-migrate-source-files-that-use-c-11-or-newer-standard-features-on-linux-and-windows">How do I migrate source files that use C++11 or newer standard features on Linux* and Windows*?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-migrate-files-on-windows-when-using-a-cmake-project">How do I migrate files on Windows when using a CMake project?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-is-the-migrated-code-formatted">How is the migrated code formatted?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-does-the-compilation-database-not-contain-all-source-files-in-the-project">Why does the compilation database not contain all source files in the project?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-use-the-migrated-module-file-in-the-new-project">How do I use the migrated module file in the new project?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#is-the-memory-space-allocated-by-sycl-malloc-device-sycl-malloc-host-and-dpct-dpct-malloc-initialized">Is the memory space allocated by sycl::malloc_device, sycl::malloc_host, and dpct::dpct_malloc initialized?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-migrate-cuda-source-code-that-contains-cub-library-implementation-source-code">How do I migrate CUDA* source code that contains CUB library implementation source code?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-fix-the-issue-of-sycl-code-hanging-due-to-work-group-level-synchronization-such-as-a-group-barrier-used-in-a-conditional-statement">How do I fix the issue of SYCL* code hanging due to work group level synchronization, such as a group barrier used in a conditional statement?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#troubleshooting-migration">Troubleshooting Migration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-fix-an-error-such-as-error-unknown-type-name-when-i-migrate-files-with-dpct-in-root-srcdir-out-root-dstdir-cu">How do I fix an error such as “error: unknown type name” when I migrate files with “dpct –in-root=srcdir –out-root=dstdir *.cu”?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-fix-a-parsing-error-such-as-no-member-named-max-in-namespace-std-or-no-member-named-min-in-namespace-std-when-migrating-code-on-windows">How do I fix a parsing error such as “no member named ‘max’ in namespace ‘std’” or “no member named ‘min’ in namespace ‘std’” when migrating code on Windows?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-fix-a-compilation-error-such-as-error-dlopen-not-declared-when-i-compile-code-on-a-windows-machine-that-was-originally-migrated-on-linux">How do I fix a compilation error such as “error: dlopen not declared” when I compile code on a Windows machine, that was originally migrated on Linux?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-didn-t-the-atomic-apis-get-migrated">Why didn’t the “atomic*” APIs get migrated?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-did-my-migration-fail-with-error-restrict-requires-a-pointer-or-reference">Why did my migration fail with “error: restrict requires a pointer or reference”?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-resolve-incorrect-runtime-behavior-for-dpct-dev-mgr-and-dpct-mem-mgr-in-a-library-project-that-is-loaded-more-than-once-in-another-application">How do I resolve incorrect runtime behavior for dpct::dev_mgr and dpct:mem_mgr in a library project that is loaded more than once in another application?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-i-get-warning-shift-count-width-of-type-when-i-compile-migrated-code-with-the-intel-oneapi-dpc-c-compiler">Why do I get “warning: shift count &gt;= width of type” when I compile migrated code with the Intel® oneAPI DPC++/C++ Compiler?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-resolve-missing-include-errors-that-occur-when-migrating-my-code">How do I resolve missing include errors that occur when migrating my code?</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <div><a href='https://www.intel.com/content/www/us/en/privacy/intel-cookie-notice.html' data-cookie-notice='true'>Cookies</a> <a href='https://www.intel.com/content/www/us/en/privacy/intel-privacy-notice.html'>| Privacy</a> <a data-wap_ref='dns' id='wap_dns' href='https://www.intel.com/content/www/us/en/privacy/intel-cookie- notice.html'>| Do Not Share My Personal Information</a> </div><div>&copy; Intel Corporation. Intel, the Intel logo, and other Intel marks are trademarks of Intel Corporation or its subsidiaries. Other names and brands may be claimed as the property of others. SYCL is a registered trademark of the Kronos Group, Inc. No license (express or implied, by estoppel or otherwise) to any intellectual property rights is granted by this document, with the sole exception that code included in this document is licensed subject to the Zero-Clause BSD open source license (OBSD), <a href='http://opensource.org/licenses/0BSD'>http://opensource.org/licenses/0BSD</a>. </div><br><div>SYCLomatic is licensed under Apache License Version 2.0 with LLVM exceptions. Refer to the <a href='https://github.com/oneapi-src/SYCLomatic/blob/e96dbad0a424be9decd0aff7955707d8fb679043/LICENSE.TXT'>LICENSE </a> file for the full license text and copyright notice.</div><br><div>Last updated: 24 June, 2024</div>
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>